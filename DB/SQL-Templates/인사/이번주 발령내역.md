# 이번주 발령 내역 조회 (사번 'N' 제외)

## 1. 사용자 요청

이번 주에 발령 난 사람 중 사번이 'N'으로 시작하는 직원을 제외하고, 중복 없이 조회해 주세요.

## 2. 분석 및 SQL 쿼리 생성 과정

1.  **관련 테이블/뷰 식별**: '발령 이력' 정보를 담고 있는 `hrtransferhistory2` 뷰를 사용했습니다.
2.  **필터링 조건 확인**:
    *   **기간**: '이번 주' 발령 내역을 조회하기 위해 `assignment_date` 컬럼을 사용하고, `YEARWEEK(STR_TO_DATE(assignment_date, '%Y-%m-%d'), 1) = YEARWEEK(CURDATE(), 1)` 조건을 적용했습니다. `STR_TO_DATE` 함수를 사용하여 `assignment_date` (VARCHAR)를 날짜 형식으로 변환 후 비교합니다.
    *   **사번 제외**: 사번이 'N'으로 시작하는 직원을 제외하기 위해 `employee_number NOT LIKE 'N%'` 조건을 추가했습니다.
    *   **중복 제거**: 고유한 직원 목록을 얻기 위해 `SELECT DISTINCT`를 사용했습니다.
3.  **선택 컬럼**: 직원명 (`name`)과 발령일 (`assignment_date`)을 선택했습니다.

## 3. 최종 SQL 쿼리

```sql
SELECT DISTINCT
    name AS "직원명",
    assignment_date AS "첫 발령일"
FROM
    hrtransferhistory2
WHERE
    YEARWEEK(STR_TO_DATE(assignment_date, '%Y-%m-%d'), 1) = YEARWEEK(CURDATE(), 1)
    AND employee_number NOT LIKE 'N%';
```

## 4. 쿼리 설명

이 SQL 쿼리는 `hrtransferhistory2` 뷰에서 이번 주(`CURDATE()` 기준)에 발령된 직원들의 목록을 조회합니다. 이때, 사번(`employee_number`)이 'N'으로 시작하는 직원은 결과에서 제외되며, 발령 내역이 여러 건이더라도 직원의 이름은 한 번만 표시됩니다(`DISTINCT`). `assignment_date`는 해당 직원의 이번 주 발령일 중 하나를 보여줍니다.
